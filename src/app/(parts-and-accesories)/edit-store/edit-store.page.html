<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="back()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Edit Store</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="container" style="padding: 16px;">
    <form [formGroup]="editForm" (ngSubmit)="onSubmit()" novalidate>

      <!-- Store Name -->
      <div class="input-group" [class.focused]="editForm.get('store_name')?.value || isFocused['store_name']">
        <ion-icon name="storefront-outline" class="input-icon"></ion-icon>
        <input
          type="text"
          id="store_name"
          class="text-field"
          placeholder=" "
          formControlName="store_name"
          (focus)="onInputFocus('store_name')"
          (blur)="onInputBlur('store_name')"
          required
          autocomplete="off"
        />
        <label for="store_name">Store Name *</label>
      </div>
      <ion-text color="danger" *ngIf="isControlInvalid('store_name')">
        <p class="error-message">Store Name is required.</p>
      </ion-text>

      <!-- City -->
      <div class="input-group" [class.focused]="editForm.get('city')?.value || isFocused['city']">
        <ion-icon name="location-outline" class="input-icon"></ion-icon>
        <input
          type="text"
          id="city"
          class="text-field"
          placeholder=" "
          formControlName="city"
          (focus)="onInputFocus('city')"
          (blur)="onInputBlur('city')"
          required
          autocomplete="off"
        />
        <label for="city">City *</label>
      </div>
      <ion-text color="danger" *ngIf="isControlInvalid('city')">
        <p class="error-message">City is required.</p>
      </ion-text>

      <!-- Address -->
      <div class="input-group" [class.focused]="editForm.get('address')?.value || isFocused['address']">
        <ion-icon name="map-outline" class="input-icon"></ion-icon>
        <input
          type="text"
          id="address"
          class="text-field"
          placeholder=" "
          formControlName="address"
          (focus)="onInputFocus('address')"
          (blur)="onInputBlur('address')"
          required
          autocomplete="off"
        />
        <label for="address">Address *</label>
      </div>
      <ion-text color="danger" *ngIf="isControlInvalid('address')">
        <p class="error-message">Address is required.</p>
      </ion-text>

      <!-- Email -->
      <div class="input-group" [class.focused]="editForm.get('email')?.value || isFocused['email']">
        <ion-icon name="mail-outline" class="input-icon"></ion-icon>
        <input
          type="email"
          id="email"
          class="text-field"
          placeholder=" "
          formControlName="email"
          (focus)="onInputFocus('email')"
          (blur)="onInputBlur('email')"
          required
          autocomplete="off"
        />
        <label for="email">Email *</label>
      </div>
      <ion-text color="danger" *ngIf="isControlInvalid('email')">
        <p class="error-message" *ngIf="editForm.get('email')?.errors?.['required']">Email is required.</p>
        <p class="error-message" *ngIf="editForm.get('email')?.errors?.['email']">Please enter a valid email.</p>
      </ion-text>

      <!-- Mobile -->
      <div class="input-group" [class.focused]="editForm.get('mobile')?.value || isFocused['mobile']">
        <ion-icon name="call-outline" class="input-icon"></ion-icon>
        <input
          type="tel"
          id="mobile"
          class="text-field"
          placeholder=" "
          formControlName="mobile"
          (focus)="onInputFocus('mobile')"
          (blur)="onInputBlur('mobile')"
          required
          autocomplete="off"
        />
        <label for="mobile">Mobile *</label>
      </div>
      <ion-text color="danger" *ngIf="isControlInvalid('mobile')">
        <p class="error-message">Mobile number is required.</p>
      </ion-text>

      <!-- Store Detail -->
      <div class="input-group" [class.focused]="editForm.get('store_detail')?.value || isFocused['store_detail']">
        <ion-icon name="document-text-outline" class="input-icon"></ion-icon>
        <textarea
          id="store_detail"
          class="text-field"
          placeholder=" "
          formControlName="store_detail"
          (focus)="onInputFocus('store_detail')"
          (blur)="onInputBlur('store_detail')"
        ></textarea>
        <label for="store_detail">Store Detail</label>
      </div>


      <!-- Select Option -->
      <div class="input-group" [class.focused]="editForm.get('select_option')?.value || isFocused['select_option']">
        <ion-icon name="list-outline" class="input-icon"></ion-icon>
        <select
          class="text-field"
          formControlName="select_option"
          id="select_option"
          (focus)="onInputFocus('select_option')"
          (blur)="onInputBlur('select_option')"
        >
          <option value="" disabled hidden></option>
            <option value="Bike">Bike</option>
          <option value="Car">Car</option>
            <option value="Commercial Vehicle">Commercial Vehicle</option>
              <option value="Machinery">Machinery</option>
                <option value="Industial Plant">Industial Plant</option>
              
        </select>
        <label for="select_option">Select Type *</label>
      </div>
      <ion-text color="danger" *ngIf="isControlInvalid('select_option')">
        <p class="error-message">Please select a store type.</p>
      </ion-text>

      <!-- Bank Name -->
      <div class="input-group" [class.focused]="editForm.get('bank_name')?.value || isFocused['bank_name']">
        <ion-icon name="card-outline" class="input-icon"></ion-icon>
        <input
          type="text"
          id="bank_name"
          class="text-field"
          placeholder=" "
          formControlName="bank_name"
          (focus)="onInputFocus('bank_name')"
          (blur)="onInputBlur('bank_name')"
          autocomplete="off"
        />
        <label for="bank_name">Bank Name</label>
      </div>

      <!-- Account -->
      <div class="input-group" [class.focused]="editForm.get('account')?.value || isFocused['account']">
        <ion-icon name="cash-outline" class="input-icon"></ion-icon>
        <input
          type="text"
          id="account"
          class="text-field"
          placeholder=" "
          formControlName="account"
          (focus)="onInputFocus('account')"
          (blur)="onInputBlur('account')"
          autocomplete="off"
        />
        <label for="account">Account Number</label>
      </div>

      <!-- JazzCash -->
      <div class="input-group" [class.focused]="editForm.get('jazzcash')?.value || isFocused['jazzcash']">
        <ion-icon name="logo-usd" class="input-icon"></ion-icon>
        <input
          type="text"
          id="jazzcash"
          class="text-field"
          placeholder=" "
          formControlName="jazzcash"
          (focus)="onInputFocus('jazzcash')"
          (blur)="onInputBlur('jazzcash')"
          autocomplete="off"
        />
        <label for="jazzcash">JazzCash Number</label>
      </div>

      <!-- Logo Upload -->
      <ion-label>Logo Upload</ion-label>
      <input type="file" (change)="onFileChange($event, 'logo')" accept="image/*" />
      <div *ngIf="preview.logo" style="margin-top: 10px;">
        <img [src]="preview.logo" alt="Logo Preview" style="max-width: 150px; max-height: 150px;" />
      </div>

      <!-- Cover Image Upload -->
      <ion-label>Cover Image Upload</ion-label>
      <input type="file" (change)="onFileChange($event, 'cover_image')" accept="image/*" />
      <div *ngIf="preview.cover_image" style="margin-top: 10px;">
        <img [src]="preview.cover_image" alt="Cover Image Preview" style="max-width: 150px; max-height: 150px;" />
      </div>

      <!-- Submit Button -->
      <ion-button expand="block" type="submit" [disabled]="editForm.invalid" style="margin-top: 20px;">
        Update Store
      </ion-button>
    </form>
  </div>
</ion-content>
