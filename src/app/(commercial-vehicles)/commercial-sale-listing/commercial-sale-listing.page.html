<!-- <ion-header>
  <ion-toolbar>
    <ion-title>for-sale</ion-title>
  </ion-toolbar>
</ion-header> -->
<ion-header>
  <ion-toolbar class ="bg-toolbar" >
    <ion-buttons slot="start"class="bg-red" style="height: 56px !important; width: 56px !important; margin: -4px !important;">
      <!-- <ion-back-button defaultHref="/" style="color: #0dcaf066;"></ion-back-button> -->
      <img src="../../../assets/extra/back arrow.png" (click)="back()" style="width: 20px; margin-left: 20px;">
    </ion-buttons>
    <ion-label style="color: black;">{{ filteredCarData.length }}  Vehicles for Sale</ion-label>
  </ion-toolbar>
</ion-header>


<ion-content>

  <div style="text-align: -webkit-center; position: sticky; top: -5px; z-index: 9999;">
    <ion-col>
      <ion-card class="btn-white">
        <ion-card-header>

          <ion-row>
        <!--card filter -->
        <div style="text-align: -webkit-center; position: sticky; top: 0px; z-index: 1;  ">
          <ion-col>
            <ion-card class="btn-filter" style="margin-left: 0px; max-width: 100px;" (click)="filter()">
              <ion-card-header>
                <div style="width: 80px; margin-top: -9px; border-radius: 13px;">
                  <ion-row><img src="../../../assets/Car-section/Listing/filter.png" style="height: 20px; width: 20px;" fill="clear;"/>
                    <strong style="margin-left: 6px;">Filters</strong></ion-row>
                </div>
  <ion-card-subtitle class="clr-white" ></ion-card-subtitle>
</ion-card-header>
</ion-card>
</ion-col>
</div>

<!--card sort by -->
<div style="text-align: -webkit-center; position: sticky; top: 0px; z-index: 1;">
  <ion-col>
    <ion-card class="btn-filter" id="click-trigger" style="margin-left: 0px; max-width: 100px;"  trigger="click-trigger" triggerAction="click">
      <ion-card-header>
        <div style="width: 80px; margin-top: -9px; border-radius: 13px;">
          <ion-row><img src="../../../assets/Car-section/Listing/sort-by.png" style="height: 20px; width: 20px;" fill="clear;"/>
            <strong style="margin-left: 6px;">Sort by</strong></ion-row>
        </div>
<ion-card-subtitle class="clr-white" ></ion-card-subtitle>
</ion-card-header>
</ion-card>
</ion-col>
</div>
</ion-row>
<!--  -->
    <!-- ion-popover -->
<!-- <ion-button id="click-trigger">Ion-Popover</ion-button> -->
<ion-popover trigger="click-trigger" triggerAction="click">
<ng-template>
<ion-content class="ion-padding">
<p style="font-size: 15px; text-align: left;">Sort by</p>
<div style="text-align: right; margin-top: -30px; margin-bottom: 15px;">
<ion-icon name="close" (click)="dismissPopover()"></ion-icon>
</div>
<div style="text-align: -webkit-center;">
<ion-col>
  <ion-card class="btn-dark">
    <ion-card-header>
      <ion-card-subtitle class="clr-white" ></ion-card-subtitle>
    </ion-card-header>
    </ion-card>
    </ion-col>
    </div>

<div style="text-align: center">
<table width="100%">
<ion-radio-group (ionChange)="sortCars($event.detail.value)">
<ion-item>
<ion-label>Price - Low to High</ion-label>
<ion-radio value="lowToHigh"></ion-radio>
</ion-item>
<ion-item>
<ion-label>Price - High to Low</ion-label>
<ion-radio value="highToLow"></ion-radio>
</ion-item>
<ion-item>
<ion-label>Show oldest to newest ads</ion-label>
<ion-radio value="oldestToNewest"></ion-radio>
</ion-item>
<ion-item>
<ion-label>Show latest to oldest ads</ion-label>
<ion-radio value="latestToOldest"></ion-radio>
</ion-item>
</ion-radio-group>

</table>
</div>
</ion-content>
</ng-template>
</ion-popover>

<!--  -->
<ion-row>
  <div style="margin-top: -60px; margin-left: 80%;">
  <img src="../../../assets/Car-section/Listing/saved.png" style="height: 30px; width: 30px;" fill="clear;"/></div>
  <p style="margin-top: -55px; margin-left: 10px; font-size: 20px;">3</p>
</ion-row>


    <ion-card-subtitle class="clr-white" ></ion-card-subtitle>
  </ion-card-header>
  </ion-card>
  </ion-col>
  </div>


      
<!-- card 1 supream -->
<ion-col *ngFor="let car of filteredCarData">
  <ng-container *ngIf="car.vehicle_feature_type === 'Supreme'">
    <ion-card class="btn-supreme" style="margin-top: -25px;
    " (click)="navigateToCarDetail(car.commercial_vehicle_ad_sale_id)">
      <ion-card-header>

        <!-- Images row -->
        <div style="display: flex; gap: 6px; margin: -14px; padding: 0;">
          
          <!-- Main Image (left) -->
<!-- Main Image (left) -->
<div style="flex: 2; margin: -2px; padding: 0; display: flex; flex-direction: column; position: relative;">
  <div style="position: relative;">
    <img [src]="car.image_url1"
         style="width: 100%; height: 140px; object-fit: cover; border-radius: 10px; display: block; flex-shrink: 0;" />
    <!-- Supreme Label -->
    <div style="position: absolute; top: 0px; left: 0px; background-color:rgba(13, 202, 240, 0.71); color: white; 
                font-size: 12px; font-weight: bold; padding: 2px 6px; border-radius: 4px;">
      Supreme
    </div>
  </div>

  <p class="main-heading truncate-single-line"
     style="margin: 4px 0 2px 5px; max-width: 100%; font-size: 14px;">
   {{ car.vehicle_make }} {{ car.vehicle_model }} {{ car.vehicle_version }}
  </p>
</div>



          <!-- Stacked Right Images -->
          <div style="flex: 1; display: flex; flex-direction: column; gap: 4px; margin: 0; padding: 0;">
            <img [src]="car.image_url2"
                 style="width: 100%; height: 65px; object-fit: cover; border-radius: 10px; display: block;" />
            <img [src]="car.image_url3"
                 style="width: 100%; height: 65px; object-fit: cover; border-radius: 10px; display: block;" />
            <p style="text-align: center; font-size: 14px; margin: 4px 0 0;">
              PKR <b style="font-size: 16px;">{{ car.vehicle_price }}</b>
            </p>
          </div>
        </div>

        <!-- Car details (below all images) -->
    <!-- Car details (below all images) -->
<div style="margin-top: 6px; margin-bottom: 0px;">
  <p class="listing-text" style="color: gray; margin: 4px 0 6px;">
    Available in {{ car.vehicle_price }}
  </p>

  <div class="car-details-row">
    <!-- First row (3 items) -->
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/calendar.png" style="height: 16px; width: 16px;" />
      <span> {{ car.vehicle_year }}</span>
    </div>
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/engine.png" style="height: 16px; width: 16px;" />
      <span>{{ car.vehicle_engine_size }}</span>
    </div>
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/gas-station.png" style="height: 16px; width: 16px;" />
      <span>{{ car.vehicle_fuel_type }}</span>
    </div>

    <!-- Second row (3 items) -->
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/manual-transmission.png" style="height: 16px; width: 16px;" />
      <span>{{ car.vehicle_transmission }}</span>
    </div>
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/speedometer.png" style="height: 16px; width: 16px;" />
      <span>{{ car.vehicle_mileage }}</span>
    </div>
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/edit (1).png" style="height: 16px; width: 16px;" />
      <span>{{ car.vehicle_reg_city }}</span>
    </div>
  </div>
</div>

      </ion-card-header>
    </ion-card>
  </ng-container>
</ion-col>


  <!--car hotspot-->



 <ion-col *ngFor="let car of filteredCarData">
  <ng-container *ngIf="car.vehicle_feature_type === 'Hotspot'">
    <ion-card class="btn-supreme" style="margin-top: -25px;
    " (click)="navigateToCarDetail(car.commercial_vehicle_ad_sale_id)">
      <ion-card-header>

        <!-- Images row -->
        <div style="display: flex; gap: 6px; margin: -14px; padding: 0;">
          
          <!-- Main Image (left) -->
<!-- Main Image (left) -->
<div style="flex: 2; margin: -2px; padding: 0; display: flex; flex-direction: column; position: relative;">
  <div style="position: relative;">
    <img [src]="car.image_url1"
         style="width: 100%; height: 140px; object-fit: cover; border-radius: 10px; display: block; flex-shrink: 0;" />
    <!-- Supreme Label -->
    <div style="position: absolute; top: 0px; left: 0px; background-color:rgba(255, 193, 7, 0.57); color: white; 
                font-size: 12px; font-weight: bold; padding: 2px 6px; border-radius: 4px;">
      Hotspot
    </div>
  </div>

  <p class="main-heading truncate-single-line"
     style="margin: 4px 0 2px 5px; max-width: 100%; font-size: 14px;">
   {{ car.vehicle_make }} {{ car.vehicle_model }} {{ car.vehicle_version }}
  </p>
</div>



          <!-- Stacked Right Images -->
          <div style="flex: 1; display: flex; flex-direction: column; gap: 4px; margin: 0; padding: 0;">
            <img [src]="car.image_url2"
                 style="width: 100%; height: 65px; object-fit: cover; border-radius: 10px; display: block;" />
            <img [src]="car.image_url3"
                 style="width: 100%; height: 65px; object-fit: cover; border-radius: 10px; display: block;" />
            <p style="text-align: center; font-size: 14px; margin: 4px 0 0;">
              PKR <b style="font-size: 16px;">{{ car.vehicle_price }}</b>
            </p>
          </div>
        </div>

        <!-- Car details (below all images) -->
    <!-- Car details (below all images) -->
<div style="margin-top: 6px; margin-bottom: 0px;">
  <p class="listing-text" style="color: gray; margin: 4px 0 6px;">
    Available in {{ car.vehicle_price }}
  </p>

  <div class="car-details-row">
    <!-- First row (3 items) -->
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/calendar.png" style="height: 16px; width: 16px;" />
      <span> {{ car.vehicle_year }}</span>
    </div>
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/engine.png" style="height: 16px; width: 16px;" />
      <span>{{ car.vehicle_engine_size }}</span>
    </div>
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/gas-station.png" style="height: 16px; width: 16px;" />
      <span>{{ car.vehicle_fuel_type }}</span>
    </div>

    <!-- Second row (3 items) -->
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/manual-transmission.png" style="height: 16px; width: 16px;" />
      <span>{{ car.vehicle_transmission }}</span>
    </div>
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/speedometer.png" style="height: 16px; width: 16px;" />
      <span>{{ car.vehicle_mileage }}</span>
    </div>
    <div style="flex: 1 1 33%; display: flex; align-items: center; gap: 4px; color: gray;">
      <img src="../../assets/icon/edit (1).png" style="height: 16px; width: 16px;" />
      <span>{{ car.vehicle_reg_city }}</span>
    </div>
  </div>
</div>

      </ion-card-header>
    </ion-card>
  </ng-container>
</ion-col>



<!--normal card -->

<ion-col *ngFor="let car of filteredCarData" style="max-width: 400px; margin: auto;">
  <ng-container *ngIf="car.vehicle_feature_type=== 'General'">
    <ion-card
      class="btn-card"
      (click)="navigateToCarDetail(car.commercial_vehicle_ad_sale_id)"
      style="border-radius: 10px; overflow: hidden; padding: 8px; display: flex; gap: 12px; align-items: flex-start;"
    >
      <!-- Left: Image fixed width, full height -->
      <div style="flex-shrink: 0; width: 160px; height: 140px; overflow: hidden; border-radius: 10px;">
        <img
          [src]="car.image_url1"
          alt="Car image"
          style="width: 100%; height: 100%; object-fit: cover; display: block;"
        />
      </div>

      <!-- Right: Info & details -->
      <div style="flex: 1; display: flex; flex-direction: column; justify-content: space-between;">

        <!-- Top info: Title & Location -->
        <div>
          <p class="main-heading truncate" style="margin: 0 0 4px 0; font-weight: 600; font-size: 14px;">
            {{ car.vehicle_make }} {{ car.vehicle_model }} {{ car.vehicle_version }}
          </p>
          <p class="listing-text" style="color: gray; margin-top: 0; font-size: 10px;">
            Available for viewing in {{ car.vehicle_location }}
          </p>
        </div>

        <!-- Middle: Details grid -->
        <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; color: gray; font-size: 12px;">
          <div style="display: flex; align-items: center; gap: 4px; flex: 1 1 45%;">
            <img src="../../assets/icon/calendar.png" style="height: 14px; width: 14px;" />
            <span>{{ car.vehicle_year }}</span>
          </div>
          <div style="display: flex; align-items: center; gap: 4px; flex: 1 1 45%;">
            <img src="../../assets/icon/engine.png" style="height: 14px; width: 14px;" />
            <span>{{ car.vehicle_engine_size }}</span>
          </div>
          <div style="display: flex; align-items: center; gap: 4px; flex: 1 1 45%;">
            <img src="../../assets/icon/gas-station.png" style="height: 14px; width: 14px;" />
            <span>{{ car.vehicle_fuel_type }}</span>
          </div>
          <div style="display: flex; align-items: center; gap: 4px; flex: 1 1 45%;">
            <img src="../../assets/icon/manual-transmission.png" style="height: 14px; width: 14px;" />
            <span>{{ car.vehicle_transmission }}</span>
          </div>
          <div style="display: flex; align-items: center; gap: 4px; flex: 1 1 45%;">
            <img src="../../assets/icon/speedometer.png" style="height: 14px; width: 14px;" />
            <span>{{ car.vehicle_mileage }}</span>
          </div>
          <div style="display: flex; align-items: center; gap: 4px; flex: 1 1 45%;">
            <img src="../../assets/icon/edit (1).png" style="height: 14px; width: 14px;" />
            <span>{{ car.vehicle_reg_city }}</span>
          </div>
        </div>

        <!-- Bottom: Price aligned right -->
        <div style="margin-top: 12px; text-align: right;">
          <p class="listing-text" style="margin: 0; font-size: 16px; font-weight: 700; color: black;">
            PKR {{ car.vehicle_price }}
          </p>
        </div>
      </div>
    </ion-card>
  </ng-container>
</ion-col>







</ion-content>
